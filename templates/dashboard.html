<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your Career Dashboard</title>
 <script src="https://cdn.tailwindcss.com"></script>
    <!-- ✅ STATIC CSS -->
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>

<div id="dashboard" class="space-y-8 app-tab-content">
    
    <!-- User Greeting Header -->
    <div class="p-8 text-center bg-white rounded-2xl border border-indigo-300 shadow-xl">
        <h2 class="text-3xl font-extrabold text-gray-800 mb-2">Your Career Dashboard</h2>
        <p class="text-gray-600 text-lg">Track your resume activity and explore companies.</p>
        <p class="text-sm font-medium text-indigo-600 mt-2">
            Logged in as:
            <span id="currentUsernameDisplay"></span>
            <span id="dashboardUserId" class="text-gray-500"></span>
        </p>
    </div>

    <!-- Main Dashboard Content Wrapper -->
    <div id="dashboardContent" class="space-y-8">
        <!-- Main Navigation / Status Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- Resume Status Card -->
            <div id="resumeStatusCard"
                onclick="document.getElementById('resumeManagerSection').scrollIntoView({ behavior: 'smooth' })"
                class="p-6 bg-yellow-50 rounded-xl border border-yellow-300 shadow-md cursor-pointer hover:shadow-lg transition duration-200 transform hover:scale-[1.01]">

                <h3 class="text-xl font-bold text-yellow-700 mb-3">
                    Resume Status
                </h3>

                <div id="resumeStatusContent" class="text-sm text-gray-600 space-y-2">
                    <p>Status:
                        <span id="currentResumeStatus" class="font-bold text-red-600">Not Uploaded</span>
                    </p>
                    <p>File: <span id="currentFilenameSummary">N/A</span></p>
                    <p>Last Update: <span id="currentUploadTimeSummary">N/A</span></p>
                </div>
            </div>

            <!-- Profile Views -->
            <div class="p-6 bg-white rounded-xl border border-gray-200 shadow-md text-center">
                <h3 class="text-xl font-bold text-gray-700 mb-3">Profile Views</h3>
                <p class="text-5xl font-extrabold text-green-600">
                    <span id="viewCount">0</span>
                </p>
            </div>

            <!-- Quick Actions -->
            <div class="p-6 bg-indigo-50 rounded-xl border border-indigo-300 shadow-md">
                <h3 class="text-xl font-bold text-indigo-700 mb-3">Quick Actions</h3>

                <div class="space-y-3 mt-4">
                    <button onclick="switchTab('address')"
                        class="w-full py-2 px-4 bg-indigo-600 text-white rounded-lg">
                        Manage Shipping Addresses
                    </button>

                    <button onclick="switchTab('checkout')"
                        class="w-full py-2 px-4 bg-purple-600 text-white rounded-lg">
                        Simulate Order Checkout
                    </button>
                </div>
            </div>
        </div>

        <hr class="my-8 border-gray-200">

        <!-- Resume Manager -->
        <div id="resumeManagerSection"
            class="p-8 bg-white rounded-2xl shadow-xl border border-yellow-400/50 space-y-6">

            <h3 class="text-2xl font-bold text-yellow-800 border-b pb-3">
                Resume Upload & Viewer
            </h3>

            <form id="resumeUploadForm"
                class="space-y-4 p-5 border border-yellow-200 rounded-xl bg-yellow-50"
                onsubmit="handleResumeUpload(event)">

                <label for="resumeFile">Select Resume:</label>
                <input type="file" id="resumeFile" required>

                <button type="submit"
                    class="bg-green-600 text-white py-2 px-5 rounded-lg">
                    Upload Resume
                </button>
            </form>

            <div id="currentResumeInfo" class="hidden">
                <button id="viewResumeBtn">View Resume</button>
                <button id="downloadResumeBtn">Download Resume</button>
            </div>

            <div id="resumeViewerContainer" class="hidden">
                <embed id="resumeViewer" src="" type="application/pdf" width="100%" height="600px">
            </div>
        </div>
    </div>
</div>

<!-- ✅ STATIC JS -->
<script src="/static/js/dashboard.js"></script>

<script>
    const companyViewProfileCountEl =
    document.getElementById("companyViewProfileCount");

const viewAllJobsBtn =
    document.getElementById("viewAllJobsBtn");

    /* SAFE DEFAULTS so page doesn't crash */
    const API_URL = "http://localhost:8080/api";
    const currentUsername = "Demo User";
    const currentUserId = 1;

    document.getElementById("currentUsernameDisplay").textContent = currentUsername;
    document.getElementById("dashboardUserId").textContent = `(ID: ${currentUserId})`;
</script>

</body>
</html>
